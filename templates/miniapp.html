<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
  <title>Profile Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --bg: var(--tg-theme-secondary-bg-color, #232e3c);
      --card: var(--tg-theme-secondary-bg-color, #232e3c);
      --surface: var(--tg-theme-section-bg-color, var(--tg-theme-secondary-bg-color, #232e3c));
      --surface-soft: var(--tg-theme-secondary-bg-color, #232e3c);
      --surface-strong: var(--tg-theme-section-bg-color, #2a3a4d);
      --line: var(--tg-theme-section-separator-color, rgba(255, 255, 255, 0.08));
      --text: var(--tg-theme-text-color, #e6ebf0);
      --muted: var(--tg-theme-hint-color, #9aa7b5);
      --blue: var(--tg-theme-button-color, #3390ec);
      --accent: var(--tg-theme-link-color, var(--tg-theme-button-color, #3390ec));
      --accent-soft: color-mix(in srgb, var(--accent) 20%, transparent);
      --button-fg: var(--tg-theme-button-text-color, #fff);
      --danger: var(--tg-theme-destructive-text-color, #e64a3b);
      --radius-lg: 22px;
      --radius-md: 14px;
      --space-1: 6px;
      --space-2: 10px;
      --space-3: 14px;
      --space-4: 18px;
      --safe: env(safe-area-inset-bottom, 0px);
      --nav-space: 24px;
    }
    * { box-sizing: border-box; }
    html, body {
      height: 100%;
      background: var(--bg);
      overscroll-behavior-y: none;
    }
    body {
      margin: 0;
      font-family: "SF Pro Text", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text);
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }
    .wrap {
      max-width: 560px;
      margin: 0 auto;
      min-height: 100dvh;
      padding: 0 0 calc(var(--nav-space) + var(--safe));
      background: var(--bg);
    }
    .card {
      background: var(--card);
      border: 0;
      border-radius: 0;
      padding: var(--space-3);
      margin-bottom: 0;
      min-height: 100dvh;
      box-shadow: none;
    }
    @supports not (height: 100dvh) {
      .wrap { min-height: 100vh; }
      .card { min-height: 100vh; }
    }
    .status { color: var(--muted); font-size: 13px; margin-bottom: var(--space-1); min-height: 18px; }

    .profile-layout {
      display: grid;
      gap: 12px;
      margin-bottom: var(--space-1);
    }
    .profile-head {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 12px;
      align-items: center;
      min-width: 0;
    }
    .profile-meta {
      min-width: 0;
      display: grid;
      gap: 6px;
    }
    .name-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      min-width: 0;
    }
    .name-wrap {
      min-width: 0;
      display: grid;
      gap: 4px;
    }
    .name-top {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .avatar-wrap {
      width: 108px;
      height: 108px;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid var(--line);
      box-shadow: none;
      background: var(--surface-strong);
      position: relative;
    }
    .avatar-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }
    .avatar-fallback {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-size: 28px;
      font-weight: 700;
      color: var(--text);
      letter-spacing: -0.03em;
    }
    .name {
      font-size: 16px;
      font-weight: 650;
      letter-spacing: -0.01em;
      margin: 0;
      text-align: left;
      color: var(--text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .presence {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      width: fit-content;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: var(--surface-soft);
      color: var(--muted);
      font-size: 12px;
      line-height: 1;
    }
    .presence-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--accent);
      display: inline-block;
    }
    .presence-edit-btn {
      width: 24px;
      height: 24px;
      border: 1px solid var(--line);
      border-radius: 8px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: var(--surface-soft);
      color: var(--muted);
      cursor: pointer;
      padding: 0;
      transition: background-color .14s ease, color .14s ease, transform .14s ease;
    }
    .presence-edit-btn svg {
      width: 13px;
      height: 13px;
      stroke: currentColor;
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    .presence-edit-btn:active { transform: scale(.96); }
    .presence-edit-btn:hover {
      color: var(--accent);
      background: var(--accent-soft, rgba(51, 144, 236, 0.2));
    }
    .chips {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      gap: 8px;
      margin-top: 0;
      flex-wrap: wrap;
      pointer-events: none;
    }
    .chip {
      min-width: 34px;
      height: 34px;
      padding: 0 8px;
      border-radius: 999px;
      display: grid;
      place-items: center;
      background: var(--surface-strong);
      color: var(--text);
      font-size: 18px;
      border: 1px solid var(--line);
      box-shadow: none;
      pointer-events: none;
    }

    .bubble {
      width: 100%;
      background: var(--blue);
      color: var(--button-fg);
      border-radius: 14px;
      padding: 12px;
      line-height: 1.38;
      font-size: 14px;
      letter-spacing: -0.01em;
      position: relative;
      box-shadow: none;
      white-space: pre-wrap;
    }
    .bubble-wrap {
      position: relative;
      width: 100%;
    }
    .bubble-edit-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 24px;
      height: 24px;
      border: 1px solid color-mix(in srgb, var(--button-fg) 45%, transparent);
      border-radius: 8px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: color-mix(in srgb, var(--blue) 82%, #000 18%);
      color: var(--button-fg);
      cursor: pointer;
      padding: 0;
      transition: transform .14s ease, opacity .14s ease;
    }
    .bubble-edit-btn svg {
      width: 13px;
      height: 13px;
      stroke: currentColor;
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    .bubble-edit-btn:active { transform: scale(.96); }
    .summary-notes {
      margin-top: 6px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
      white-space: pre-wrap;
    }
    .answers-block {
      margin-top: 10px;
      border: 1px solid var(--line);
      border-radius: 12px;
      background: var(--surface-soft);
      padding: 10px;
      display: none;
    }
    .answers-title {
      color: var(--text);
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .answers-list {
      display: grid;
      gap: 8px;
    }
    .answers-item {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 8px 10px;
      background: var(--surface);
    }
    .answers-item-title {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 4px;
    }
    .answers-item-value {
      font-size: 13px;
      line-height: 1.32;
      color: var(--text);
    }
    .profile-note {
      color: var(--muted);
      font-size: 13px;
      line-height: 1.35;
      margin-top: 0;
      white-space: pre-wrap;
    }
    .note-row {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      width: fit-content;
    }

    .actions-row { margin-top: var(--space-2); }
    .copy-btn {
      margin-top: 0;
      width: 100%;
      border: 0;
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 14px;
      font-weight: 600;
      background: var(--accent-soft, rgba(51, 144, 236, 0.2));
      color: var(--accent);
      cursor: pointer;
      transition: background-color .14s ease, transform .14s ease;
    }
    .copy-btn:active { transform: scale(.99); }
    .ghost-btn {
      width: 100%;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 14px;
      font-weight: 600;
      background: var(--surface-soft);
      color: var(--text);
      cursor: pointer;
      transition: background-color .14s ease, transform .14s ease;
    }
    .ghost-btn:active { transform: scale(.99); }
    .editor {
      margin-top: 8px;
      display: none;
      gap: 8px;
    }
    .editor textarea {
      width: 100%;
      min-height: 74px;
      border-radius: 10px;
      border: 1px solid var(--line);
      background: var(--surface-soft);
      color: var(--text);
      font-size: 14px;
      padding: 10px 12px;
      resize: vertical;
      font-family: inherit;
    }
    .editor-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    .form-note { color: var(--muted); margin-bottom: var(--space-1); font-size: 13px; }
    .answer-target-title {
      margin: 0;
      font-size: 14px;
      color: var(--text);
      font-weight: 560;
      min-height: 0;
    }
    .answer-target-head {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 8px 0 10px;
      min-height: 40px;
    }
    .answer-progress {
      display: none;
      gap: 0;
      margin: 6px 0 10px;
    }
    .answer-progress-track {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: var(--surface-soft);
      border: 1px solid var(--line);
      overflow: hidden;
    }
    .answer-progress-bar {
      height: 100%;
      width: 0%;
      background: var(--accent);
      transition: width .2s ease;
    }
    .answer-target-avatar {
      width: 64px;
      height: 64px;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.06);
      flex: 0 0 auto;
      display: none;
    }
    .answer-target-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .answer-target-fallback {
      width: 100%;
      height: 100%;
      display: grid;
      place-items: center;
      font-size: 24px;
      color: var(--muted);
    }
    input, select, button.primary {
      width: 100%;
      margin-bottom: var(--space-1);
      border-radius: 12px;
      border: 1px solid var(--line);
      background: var(--surface-soft);
      color: var(--text);
      font-size: 16px;
      padding: 10px 12px;
    }
    input:focus { outline: none; border-color: var(--accent); box-shadow: none; }
    button.primary {
      background: var(--blue);
      color: var(--button-fg);
      border: none;
      font-weight: 600;
      box-shadow: none;
      cursor: pointer;
      transition: opacity .14s ease, transform .14s ease;
    }
    button.primary:active { transform: scale(.99); }
    .choice-group {
      margin: 10px 0 6px;
      opacity: 0;
      max-height: 0;
      overflow: hidden;
      transform: translateY(8px);
      pointer-events: none;
      transition: opacity .24s ease, transform .24s ease, max-height .28s ease;
    }
    .choice-group.visible {
      opacity: 1;
      max-height: 180px;
      transform: translateY(0);
      pointer-events: auto;
    }
    .choice-group { display: none !important; }
    .swipe-card {
      margin: 10px 0 12px;
      border: 1px solid var(--line);
      border-radius: 16px;
      background: var(--surface-soft);
      min-height: 240px;
      display: grid;
      grid-template-rows: auto 1fr auto;
      padding: 14px;
      user-select: none;
      -webkit-user-select: none;
      touch-action: pan-y;
      position: relative;
      transition: transform .18s ease;
      will-change: transform;
    }
    .swipe-card.swipe-left .swipe-choice:first-child { border-color: var(--danger); }
    .swipe-card.swipe-right .swipe-choice:last-child { border-color: var(--accent); }
    .swipe-title {
      font-size: 14px;
      color: var(--text);
      font-weight: 560;
      text-align: center;
      margin-bottom: 10px;
    }
    .swipe-center {
      display: grid;
      place-items: center;
      color: var(--muted);
      font-size: 13px;
      text-align: center;
      padding: 10px;
    }
    .swipe-choices {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      font-size: 14px;
    }
    .swipe-choice {
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 10px 8px;
      text-align: center;
      background: var(--surface);
      line-height: 1.25;
    }
    .swipe-choice b {
      display: block;
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 4px;
      font-weight: 600;
    }
    .swipe-badge {
      position: absolute;
      top: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
      opacity: 0;
      transform: scale(.92);
      pointer-events: none;
      transition: opacity .12s ease, transform .12s ease;
      border: 1px solid transparent;
      letter-spacing: .2px;
    }
    .swipe-badge.left {
      left: 12px;
      color: var(--danger);
      border-color: var(--danger);
      background: var(--surface);
    }
    .swipe-badge.right {
      right: 12px;
      color: var(--accent);
      border-color: var(--accent);
      background: var(--surface);
    }
    .choice-title {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: var(--space-1);
      text-transform: lowercase;
    }
    .choice-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-1);
      touch-action: pan-y;
    }
    .choice-btn {
      border: 1px solid var(--line);
      background: var(--surface-soft);
      color: var(--text);
      border-radius: 11px;
      padding: 8px 9px;
      cursor: pointer;
      text-align: left;
      font-size: 13px;
      line-height: 1.25;
      min-height: 56px;
      transition: background-color .14s ease, border-color .14s ease, transform .14s ease;
    }
    .choice-btn .em { display: block; font-size: 20px; margin-bottom: 2px; }
    .choice-btn.active {
      border-color: var(--accent);
      background: var(--accent-soft, rgba(51, 144, 236, 0.2));
    }
    .choice-btn:active { transform: scale(.99); }
    .status-line { color: var(--muted); min-height: 20px; }
    .suggestions {
      margin-top: var(--space-1);
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-1);
    }
    .suggestions .item {
      border: 1px solid var(--line);
      background: var(--surface-soft);
      color: var(--text);
      border-radius: 999px;
      padding: 4px 10px 4px 4px;
      font-size: 12px;
      cursor: pointer;
      transition: background-color .14s ease, border-color .14s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .item-avatar {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid var(--line);
      background: var(--surface);
      flex: 0 0 auto;
      display: grid;
      place-items: center;
      font-size: 11px;
      color: var(--muted);
      line-height: 1;
    }
    .item-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .suggestions .item:hover {
      border-color: var(--accent);
      background: var(--accent-soft, rgba(51, 144, 236, 0.2));
    }
    pre {
      margin: var(--space-2) 0 0;
      white-space: pre-wrap;
      background: var(--surface-soft);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 10px 11px;
      line-height: 1.4;
      font-size: 14px;
    }

    .bottom-nav {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: calc(var(--space-4) + var(--safe));
      width: auto;
      padding: 6px;
      border-radius: 28px;
      border: 1px solid var(--line);
      background: color-mix(in srgb, var(--surface) 86%, transparent);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.22);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      display: grid;
      grid-template-columns: repeat(3, auto);
      gap: var(--space-1);
    }
    .tab-btn {
      border: 0;
      border-radius: 22px;
      width: clamp(62px, 20vw, 78px);
      height: clamp(62px, 20vw, 78px);
      justify-self: center;
      padding: 0;
      background: transparent;
      color: var(--muted);
      font-weight: 580;
      font-size: 0;
      cursor: pointer;
      transition: background-color .14s ease, color .14s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0;
    }
    .tab-ico {
      display: inline-flex;
      line-height: 0;
    }
    .tab-ico svg {
      width: 15px;
      height: 15px;
      stroke: currentColor;
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      transition: transform .18s ease;
    }
    .tab-btn.active {
      background: var(--accent-soft, rgba(51, 144, 236, 0.2));
      color: var(--accent);
    }
    .tab-btn:active .tab-ico svg { transform: scale(.92); }
    .tab-btn.active .tab-ico svg { animation: tab-breathe 2.2s ease-in-out infinite; }
    @keyframes tab-breathe {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-1.5px); }
    }
    .toast {
      position: fixed;
      left: 50%;
      bottom: calc(88px + var(--safe));
      transform: translateX(-50%) translateY(10px);
      width: min(740px, calc(100% - 24px));
      background: var(--surface);
      color: var(--text);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 12px 14px;
      line-height: 1.35;
      font-size: 13px;
      opacity: 0;
      pointer-events: none;
      transition: .22s ease;
      box-shadow: none;
      z-index: 50;
    }
    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
    @media (max-width: 560px) {
      .wrap { padding: 0 0 calc(var(--nav-space) + var(--safe)); }
      .profile-head { grid-template-columns: auto 1fr; }
      .avatar-wrap { width: 96px; height: 96px; }
      .name { font-size: 15px; }
      .chip { height: 32px; min-width: 32px; font-size: 17px; }
      .bubble { font-size: 14px; }
    }
  </style>
</head>
<body>
<div class="wrap">
  <section id="profileBlock" class="card">
    <div id="authStatus" class="status">–ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram —Å–µ—Å—Å–∏–∏...</div>
    <div class="profile-layout">
      <div class="profile-head">
        <div class="avatar-wrap">
          <img id="avatarImg" alt="avatar">
          <div id="avatarFallback" class="avatar-fallback">U</div>
        </div>
        <div class="profile-meta">
          <div class="name-row">
            <div class="name-wrap">
              <div class="name-top">
                <div id="profileName" class="name">@username</div>
                <div id="profilePresence" class="presence" style="display:none;">
                  <span class="presence-dot"></span>
                  <span>–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</span>
                </div>
              </div>
              <div id="profileNote" class="profile-note" style="display:none;"></div>
            </div>
          </div>
          <div class="chips">
            <div id="chipTone" class="chip">üôÇ</div>
            <div id="chipSpeed" class="chip">üê¢</div>
            <div id="chipFormat" class="chip">üí¨</div>
          </div>
        </div>
      </div>
      <div class="bubble-wrap">
        <div id="summaryBubble" class="bubble">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <button id="editProfileBtn" class="bubble-edit-btn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å" aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å">
          <svg viewBox="0 0 24 24"><path d="M12 20h9"/><path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4z"/></svg>
        </button>
      </div>
      <div id="answersBlock" class="answers-block">
        <div id="answersTitle" class="answers-title">–ö–∞–∫ —Ç–µ–±—è –æ–±—ã—á–Ω–æ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—é—Ç</div>
        <div id="answersList" class="answers-list"></div>
      </div>
      <div id="summaryNotes" class="summary-notes"></div>
    </div>
    <div class="actions-row">
      <button id="copyLink" class="copy-btn">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
    </div>
    <div id="profileEditor" class="editor">
      <textarea id="profileNoteInput" maxlength="90" placeholder="–ö–æ—Ä–æ—Ç–∫–æ –æ —Å–µ–±–µ (–¥–æ 90 —Å–∏–º–≤–æ–ª–æ–≤)"></textarea>
      <div class="editor-actions">
        <button id="saveProfileBtn" class="primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button id="cancelProfileBtn" class="ghost-btn">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
    <code id="profileLink" style="display:none;">‚Äî</code>
  </section>

  <section id="answerBlock" class="card" style="display:none;">
    <div id="answerIntro" class="form-note">–û—Å—Ç–∞–≤—å –æ—Ç–≤–µ—Ç –æ —á–µ–ª–æ–≤–µ–∫–µ</div>
    <input id="target" list="userSuggestions" placeholder="@username">
    <datalist id="userSuggestions"></datalist>
    <div id="answerHint" class="form-note">–ù–∞—á–Ω–∏ –≤–≤–æ–¥–∏—Ç—å username ‚Äî –ø–æ–¥—Ç—è–Ω–µ–º –∏–∑ Telegram-–±–∞–∑—ã –±–æ—Ç–∞</div>
    <button id="answerBackBtn" class="copy-btn" style="display:none;">‚Üê –æ–±—Ä–∞—Ç–Ω–æ</button>
    <div id="answerTargetHead" class="answer-target-head" style="display:none;">
      <div id="answerTargetAvatar" class="answer-target-avatar">
        <img id="answerTargetAvatarImg" alt="target avatar">
        <div id="answerTargetAvatarFallback" class="answer-target-fallback">?</div>
      </div>
      <div id="answerTargetTitle" class="answer-target-title"></div>
    </div>
    <div id="answerProgress" class="answer-progress">
      <div class="answer-progress-track">
        <div id="answerProgressBar" class="answer-progress-bar"></div>
      </div>
    </div>
    <div id="swipeCard" class="swipe-card" style="display:none;">
      <div id="swipeBadgeLeft" class="swipe-badge left">–≤–ª–µ–≤–æ</div>
      <div id="swipeBadgeRight" class="swipe-badge right">–≤–ø—Ä–∞–≤–æ</div>
      <div id="swipeTitle" class="swipe-title"></div>
      <div class="swipe-center">–°–≤–∞–π–ø–Ω–∏ –≤—Å—é –∫–∞—Ä—Ç–æ—á–∫—É –≤–ª–µ–≤–æ –∏–ª–∏ –≤–ø—Ä–∞–≤–æ</div>
      <div class="swipe-choices">
        <div id="swipeLeft" class="swipe-choice"></div>
        <div id="swipeRight" class="swipe-choice"></div>
      </div>
    </div>
    <div class="choice-group" data-step="0">
      <div class="choice-title">1Ô∏è‚É£ –ö–∞–∫ –ª—É—á—à–µ –Ω–∞—á–∞—Ç—å?</div>
      <div class="choice-row">
        <button class="choice-btn" type="button" data-field="tone" data-value="easy">
          <span class="em">üôÇ</span>—Å —à—É—Ç–∫–∏
        </button>
        <button class="choice-btn" type="button" data-field="tone" data-value="serious">
          <span class="em">üß†</span>–ø–æ –¥–µ–ª—É
        </button>
      </div>
    </div>
    <div class="choice-group" data-step="1">
      <div class="choice-title">2Ô∏è‚É£ –ö–æ–≥–¥–∞ –ø–∏—Å–∞—Ç—å?</div>
      <div class="choice-row">
        <button class="choice-btn" type="button" data-field="speed" data-value="fast">
          <span class="em">üî•</span>—Å—Ä–∞–∑—É
        </button>
        <button class="choice-btn" type="button" data-field="speed" data-value="slow">
          <span class="em">üê¢</span>–Ω–µ —Å–ø–µ—à–∞
        </button>
      </div>
    </div>
    <div class="choice-group" data-step="2">
      <div class="choice-title">3Ô∏è‚É£ –ì–¥–µ –ø—Ä–æ—â–µ –ø–æ–π–¥—ë—Ç?</div>
      <div class="choice-row">
        <button class="choice-btn" type="button" data-field="contact_format" data-value="text">
          <span class="em">üí¨</span>–≤ –ø–µ—Ä–µ–ø–∏—Å–∫–µ
        </button>
        <button class="choice-btn" type="button" data-field="contact_format" data-value="live">
          <span class="em">üé§</span>–≤–∂–∏–≤—É—é
        </button>
      </div>
    </div>
    <div class="choice-group" data-step="3">
      <div class="choice-title">4Ô∏è‚É£ –ö—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–≤—ã–π —à–∞–≥?</div>
      <div class="choice-row">
        <button class="choice-btn" type="button" data-field="initiative" data-value="self">
          <span class="em">üëâ</span>–µ–º—É/–µ–π –æ–∫, –µ—Å–ª–∏ –Ω–∞–ø–∏—à—É—Ç
        </button>
        <button class="choice-btn" type="button" data-field="initiative" data-value="wait">
          <span class="em">üëÄ</span>–ª—É—á—à–µ, –µ—Å–ª–∏ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–∏—Å–º–æ—Ç—Ä—è—Ç—Å—è
        </button>
      </div>
    </div>
    <div class="choice-group" data-step="4">
      <div class="choice-title">5Ô∏è‚É£ –° —á–µ–≥–æ –∑–∞—Ö–æ–¥–∏—Ç—å?</div>
      <div class="choice-row">
        <button class="choice-btn" type="button" data-field="start_context" data-value="topic">
          <span class="em">üå±</span>—Å –ª—ë–≥–∫–æ–≥–æ
        </button>
        <button class="choice-btn" type="button" data-field="start_context" data-value="direct">
          <span class="em">üéØ</span>—Å—Ä–∞–∑—É –ø–æ —Å—É—Ç–∏
        </button>
      </div>
    </div>
    <div class="choice-group" data-step="5">
      <div class="choice-title">6Ô∏è‚É£ –ö–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –≤ –Ω–∞—á–∞–ª–µ?</div>
      <div class="choice-row">
        <button class="choice-btn" type="button" data-field="attention_reaction" data-value="likes">
          <span class="em">üòä</span>–±—ã—Å—Ç—Ä–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è
        </button>
        <button class="choice-btn" type="button" data-field="attention_reaction" data-value="careful">
          <span class="em">üò∂</span>—Å–Ω–∞—á–∞–ª–∞ —Å–º–æ—Ç—Ä–∏—Ç
        </button>
      </div>
    </div>
    <div class="choice-group" data-step="6">
      <div class="choice-title">7Ô∏è‚É£ –î–∞–≤–ª–µ–Ω–∏–µ ‚Äî –Ω–æ—Ä–º?</div>
      <div class="choice-row">
        <button class="choice-btn" type="button" data-field="caution" data-value="false">
          <span class="em">ü´∂</span>–º–æ–∂–Ω–æ –∞–∫—Ç–∏–≤–Ω–µ–µ
        </button>
        <button class="choice-btn" type="button" data-field="caution" data-value="true">
          <span class="em">‚ö†Ô∏è</span>–ª—É—á—à–µ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ
        </button>
      </div>
    </div>
    <div class="choice-group" data-step="7">
      <div class="choice-title">8Ô∏è‚É£ –ö–∞–∫ —á–∞—Å—Ç–æ –ø–∏—Å–∞—Ç—å?</div>
      <div class="choice-row">
        <button class="choice-btn" type="button" data-field="frequency" data-value="often">
          <span class="em">üì¨</span>–º–æ–∂–Ω–æ —á–∞—Å—Ç–æ
        </button>
        <button class="choice-btn" type="button" data-field="frequency" data-value="rare">
          <span class="em">üï∞</span>–ª—É—á—à–µ —Ä–µ–¥–∫–æ
        </button>
      </div>
    </div>
    <div class="choice-group" data-step="8">
      <div class="choice-title">9Ô∏è‚É£ –¢–æ–Ω –æ–±—â–µ–Ω–∏—è?</div>
      <div class="choice-row">
        <button class="choice-btn" type="button" data-field="comm_format" data-value="informal">
          <span class="em">üòÑ</span>—Å–≤–æ–±–æ–¥–Ω–æ
        </button>
        <button class="choice-btn" type="button" data-field="comm_format" data-value="reserved">
          <span class="em">ü§ù</span>—Å–¥–µ—Ä–∂–∞–Ω–Ω–æ
        </button>
      </div>
    </div>
    <div class="choice-group" data-step="9">
      <div class="choice-title">–º—ã —Å–æ–±—Ä–∞–ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫—É</div>
      <div class="form-note">–∫–∞–∫ –∫ –Ω–µ–º—É/–Ω–µ–π –ø—Ä–æ—â–µ –ø–æ–¥–æ–π—Ç–∏</div>
    </div>
    <button id="sendAnswer" class="primary" style="display:none;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    <div id="answerStatus" class="status-line"></div>
  </section>

  <section id="insightBlock" class="card" style="display:none;">
    <div class="form-note">–£–∑–Ω–∞—Ç—å, –∫–∞–∫ –ª—É—á—à–µ –Ω–∞—á–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç</div>
    <input id="insightTarget" placeholder="@username">
    <div class="form-note">–ù–∞–∂–º–∏ Enter ‚Äî –æ—Ç–∫—Ä–æ–µ–º –ø—Ä–æ—Ñ–∏–ª—å —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞</div>
    <div class="form-note">–õ—é–¥–∏, –æ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—ã —É–∂–µ –æ—Å—Ç–∞–≤–ª—è–ª –æ—Ç–≤–µ—Ç—ã –∏–ª–∏ –Ω–µ–¥–∞–≤–Ω–æ —Å–º–æ—Ç—Ä–µ–ª:</div>
    <div id="insightSuggestions" class="suggestions"></div>
  </section>
</div>

<nav class="bottom-nav">
  <button id="tabProfile" class="tab-btn active" aria-label="–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å" title="–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å">
    <span class="tab-ico" aria-hidden="true">
      <svg viewBox="0 0 24 24"><path d="M20 21a8 8 0 0 0-16 0"/><circle cx="12" cy="8" r="4"/></svg>
    </span>
  </button>
  <button id="tabAnswer" class="tab-btn" aria-label="–û—Ç–≤–µ—Ç–∏—Ç—å" title="–û—Ç–≤–µ—Ç–∏—Ç—å">
    <span class="tab-ico" aria-hidden="true">
      <svg viewBox="0 0 24 24"><path d="M12 20h9"/><path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4z"/></svg>
    </span>
  </button>
  <button id="tabInsight" class="tab-btn" aria-label="–£–∑–Ω–∞—Ç—å –æ —á–µ–ª–æ–≤–µ–∫–µ" title="–£–∑–Ω–∞—Ç—å –æ —á–µ–ª–æ–≤–µ–∫–µ">
    <span class="tab-ico" aria-hidden="true">
      <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="7"/><path d="m21 21-4.3-4.3"/></svg>
    </span>
  </button>
</nav>
<div id="copyToast" class="toast"></div>

<script src="/static/miniapp.js"></script>
</body>
</html>
